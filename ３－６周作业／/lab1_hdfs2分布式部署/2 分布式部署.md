### 2 分布式部署

**2.1 准备工作**

**2.1.1 ssh 免密登陆多个不同节点**

- 验证三台机器是否彼此之间都可以免密登录，在每台机器上执行下面命令，如果没有出现需要输入密码的情况，则配置成功。

-   从节点免密登陆主节点

    ![s2.1.1](/home/ecnu/文档/Dase/DistributedSystem/lab1/pic/s2.5.1.1.png)

-   主节点免密登陆从节点 ![s2.1.2](/home/ecnu/文档/Dase/DistributedSystem/lab1/pic/s2.5.1.2.png)

**2.2 部署 HDFS 服务**

**2.2.1 格式化 NameNode **

- 在主节点的 ecnu 用户下执行以下命令: `~/hadoop-2.9.2/bin/hdfs namenode -format`格式化 NameNode (不可反复执行, 重新格式化时必须删除 /home/you/hadoop-2.9.2/tmp)

- 通过scp将hadoop-2.9.2文件传输给从节点: ` scp -r ~/hadoop-2.9.2 ecnu@219.228.135.124:/home/ecnu`

   ![s2.5.0.1](/home/ecnu/文档/Dase/DistributedSystem/lab1/pic/s2.5.0.1.png)

**2.2.2 启动 HDFS 服务 **

在主节点的 `ecnu` 用户下执行以下命令:

```shell
~/hadoop-2.9.2/sbin/start-dfs.sh
```

![s2.5.0](/home/ecnu/文档/Dase/DistributedSystem/lab1/pic/s2.5.0.png)

**2.3 查看 HDFS 服务信息**

**2.3.1 查看服务进程**

- 主节点上执行 jps

  ![2.5.1](/home/ecnu/文档/Dase/DistributedSystem/lab1/pic/2.5.1.png)

- 从节点上执行 jps

  ![s2.5.2](/home/ecnu/文档/Dase/DistributedSystem/lab1/pic/s2.5.2.png)

  ​

**2.4 停止 HDFS 服务**

**2.4.1 关闭 HDFS**

- 主节点上执行`~/hadoop-2.9.2/sbin/stop-dfs.sh`

- 使用 jps 在主节点和从节点查看进程, 不再出现 NameNode, DataNode, SecondaryNameNode 则表示服务停止 ![s2.5.3](/home/ecnu/文档/Dase/DistributedSystem/lab1/pic/s2.5.3.png)

   ![s2.5.4](/home/ecnu/文档/Dase/DistributedSystem/lab1/pic/s2.5.4.png)